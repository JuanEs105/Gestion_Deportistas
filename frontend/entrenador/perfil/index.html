<!DOCTYPE html>
<html lang="es" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil | Titanes Evolution</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../dashboard.css">
    <link rel="stylesheet" href="perfil.css">
</head>
<body>
    <!-- SIDEBAR -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-content">
            <!-- Logo -->
            <div class="sidebar-logo">
                <div class="logo-container">
                    <img src="../../assets/images/logo titanes.jpg" alt="Logo">
                </div>
                <span class="logo-text">TITANES<span class="text-primary">EVOLUTION</span></span>
            </div>

            <!-- Perfil del Entrenador -->
            <div class="coach-profile active" id="coachProfile" onclick="window.location.href='perfil/index.html'"style="cursor: default;">
                <div class="profile-avatar">
                    <img id="sidebarAvatar" src="https://via.placeholder.com/100" alt="Foto de perfil">
                </div>
                <div class="profile-info">
                    <p class="profile-name" id="sidebarName">Cargando...</p>
                    <p class="profile-role">ENTRENADOR</p>
                </div>
                <span class="material-symbols-outlined profile-icon">check_circle</span>
            </div>

            <!-- Navegación -->
            <nav class="sidebar-nav">
                <a href="../dashboard.html" class="nav-item">
                    <span class="material-symbols-outlined">dashboard</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="../deportistas/index.html" class="nav-item">
                    <span class="material-symbols-outlined">groups</span>
                    <span class="nav-text">Deportistas</span>
                </a>
                <a href="../evaluaciones/index.html" class="nav-item">
                    <span class="material-symbols-outlined">assignment</span>
                    <span class="nav-text">Evaluaciones</span>
                </a>
                <a href="../calendario/index.html" class="nav-item">
                    <span class="material-symbols-outlined">calendar_month</span>
                    <span class="nav-text">Calendario</span>
                </a>
            </nav>

            <!-- Footer del Sidebar -->
            <div class="sidebar-footer">
                <button class="nav-item" id="toggleTheme">
                    <span class="material-symbols-outlined">dark_mode</span>
                    <span class="nav-text">Modo Oscuro</span>
                </button>
                <button class="nav-item logout-btn" id="logoutBtn">
                    <span class="material-symbols-outlined">logout</span>
                    <span class="nav-text">Cerrar Sesión</span>
                </button>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- Header -->
        <header class="page-header">
            <div>
                <h1 class="page-title">
                    MI <span class="text-primary">PERFIL</span>
                </h1>
                <div class="title-divider"></div>
            </div>
            <div class="header-actions">
                <button class="btn-back" onclick="window.history.back()">
                    <span class="material-symbols-outlined">arrow_back</span>
                    Volver
                </button>
            </div>
        </header>

        <!-- Profile Content -->
        <div class="profile-container">
            <!-- Left Column - Photo & Quick Info -->
            <div class="profile-sidebar">
                <!-- Photo Card -->
                <div class="card profile-photo-card">
                    <h3 class="card-subtitle">FOTO DE PERFIL</h3>
                    
                    <div class="photo-container">
                        <div class="profile-photo-large">
                            <img id="profilePhoto" src="https://via.placeholder.com/200" alt="Foto de perfil">
                            <div class="photo-overlay">
                                <button class="photo-btn" id="changePhotoBtn">
                                    <span class="material-symbols-outlined">photo_camera</span>
                                </button>
                            </div>
                        </div>
                        <input type="file" id="photoInput" accept="image/*" style="display: none;">
                    </div>

                    <div class="photo-info">
                        <p class="text-small text-muted">Formatos permitidos: JPG, PNG</p>
                        <p class="text-small text-muted">Tamaño máximo: 5MB</p>
                    </div>

                    <button class="btn-outline" id="uploadPhotoBtn" style="display: none;">
                        <span class="material-symbols-outlined">upload</span>
                        Subir Foto
                    </button>
                </div>

                <!-- Quick Stats -->
                <div class="card stats-card">
                    <h3 class="card-subtitle">ESTADÍSTICAS</h3>
                    <div class="stats-list-profile">
                        <div class="stat-item-profile">
                            <span class="stat-icon-profile">
                                <span class="material-symbols-outlined">groups</span>
                            </span>
                            <div>
                                <p class="stat-value-profile" id="totalDeportistasProfile">0</p>
                                <p class="stat-label-profile">Deportistas</p>
                            </div>
                        </div>
                        <div class="stat-item-profile">
                            <span class="stat-icon-profile">
                                <span class="material-symbols-outlined">assignment</span>
                            </span>
                            <div>
                                <p class="stat-value-profile" id="totalEvaluacionesProfile">0</p>
                                <p class="stat-label-profile">Evaluaciones</p>
                            </div>
                        </div>
                        <div class="stat-item-profile">
                            <span class="stat-icon-profile">
                                <span class="material-symbols-outlined">calendar_month</span>
                            </span>
                            <div>
                                <p class="stat-value-profile" id="proximosEventosProfile">0</p>
                                <p class="stat-label-profile">Eventos Próximos</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Information -->
            <div class="profile-main">
                <!-- Personal Information -->
                <div class="card">
                    <div class="card-header-profile">
                        <h3 class="card-title-profile">
                            <span class="material-symbols-outlined">person</span>
                            INFORMACIÓN PERSONAL
                        </h3>
                    </div>
                    
                    <div class="info-grid">
                        <div class="info-item">
                            <label class="info-label">Nombre Completo</label>
                            <div class="info-value" id="nombreCompleto">--</div>
                        </div>

                        <div class="info-item">
                            <label class="info-label">Correo Electrónico</label>
                            <div class="info-value" id="correoElectronico">--</div>
                        </div>

                        <div class="info-item">
                            <label class="info-label">Teléfono</label>
                            <div class="info-value" id="telefono">--</div>
                        </div>

                        <div class="info-item">
                            <label class="info-label">Fecha de Nacimiento</label>
                            <div class="info-value" id="fechaNacimiento">--</div>
                        </div>

                        <div class="info-item">
                            <label class="info-label">Rol</label>
                            <div class="info-value">
                                <span class="badge-role">ENTRENADOR</span>
                            </div>
                        </div>

                        <div class="info-item">
                            <label class="info-label">Estado</label>
                            <div class="info-value">
                                <span class="badge-status active" id="estadoUsuario">ACTIVO</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Niveles Asignados -->
                <div class="card">
                    <div class="card-header-profile">
                        <h3 class="card-title-profile">
                            <span class="material-symbols-outlined">workspace_premium</span>
                            NIVELES ASIGNADOS
                        </h3>
                        <span class="badge-count" id="nivelesCount">0</span>
                    </div>
                    
                    <div id="nivelesAsignadosContainer" class="niveles-container">
                        <!-- Se llenará dinámicamente -->
                    </div>
                </div>

                <!-- Grupos Competitivos -->
                <div class="card">
                    <div class="card-header-profile">
                        <h3 class="card-title-profile">
                            <span class="material-symbols-outlined">emoji_events</span>
                            GRUPOS COMPETITIVOS
                        </h3>
                        <span class="badge-count" id="gruposCount">0</span>
                    </div>
                    
                    <div id="gruposCompetitivosContainer" class="grupos-container">
                        <!-- Se llenará dinámicamente -->
                    </div>
                </div>

                <!-- Cambiar Contraseña -->
                <div class="card">
                    <div class="card-header-profile">
                        <h3 class="card-title-profile">
                            <span class="material-symbols-outlined">lock</span>
                            SEGURIDAD
                        </h3>
                    </div>
                    
                    <button class="btn-primary-large" id="cambiarPasswordBtn">
                        <span class="material-symbols-outlined">vpn_key</span>
                        Cambiar Contraseña
                    </button>
                </div>

                <!-- Información de Cuenta -->
                <div class="card">
                    <div class="card-header-profile">
                        <h3 class="card-title-profile">
                            <span class="material-symbols-outlined">info</span>
                            INFORMACIÓN DE CUENTA
                        </h3>
                    </div>
                    
                    <div class="info-grid">
                        <div class="info-item">
                            <label class="info-label">Fecha de Registro</label>
                            <div class="info-value" id="fechaRegistro">--</div>
                        </div>

                        <div class="info-item">
                            <label class="info-label">Última Actualización</label>
                            <div class="info-value" id="fechaActualizacion">--</div>
                        </div>

                        <div class="info-item full-width">
                            <label class="info-label">ID de Usuario</label>
                            <div class="info-value code" id="userId">--</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Cambiar Contraseña -->
    <div id="modalPassword" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <span class="material-symbols-outlined">vpn_key</span>
                    Cambiar Contraseña
                </h2>
                <button class="modal-close" id="closePasswordModal">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <form id="formCambiarPassword" class="modal-body">
                <div class="form-group">
                    <label for="passwordActual">Contraseña Actual *</label>
                    <div class="password-input-container">
                        <input type="password" id="passwordActual" required>
                        <button type="button" class="toggle-password" data-target="passwordActual">
                            <span class="material-symbols-outlined">visibility</span>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="passwordNueva">Nueva Contraseña *</label>
                    <div class="password-input-container">
                        <input type="password" id="passwordNueva" required minlength="6">
                        <button type="button" class="toggle-password" data-target="passwordNueva">
                            <span class="material-symbols-outlined">visibility</span>
                        </button>
                    </div>
                    <small class="form-hint">Mínimo 6 caracteres</small>
                </div>

                <div class="form-group">
                    <label for="passwordConfirmar">Confirmar Nueva Contraseña *</label>
                    <div class="password-input-container">
                        <input type="password" id="passwordConfirmar" required minlength="6">
                        <button type="button" class="toggle-password" data-target="passwordConfirmar">
                            <span class="material-symbols-outlined">visibility</span>
                        </button>
                    </div>
                </div>

                <div class="password-strength" id="passwordStrength" style="display: none;">
                    <div class="strength-bar">
                        <div class="strength-bar-fill" id="strengthBarFill"></div>
                    </div>
                    <p class="strength-text" id="strengthText">Débil</p>
                </div>
            </form>

            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelPasswordBtn">
                    Cancelar
                </button>
                <button type="submit" form="formCambiarPassword" class="btn-primary">
                    <span class="material-symbols-outlined">check</span>
                    Cambiar Contraseña
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../api.js"></script>
    <script src="perfil.js"></script>
</body>
</html>